<% if @unfinished_notifications.blank? %>
  <div class="opss-border-top govuk-!-padding-top-3 opss-border-bottom">
    <h2 class="govuk-heading-m govuk-!-margin-bottom-2">
      Incomplete notifications (0)
    </h2>
    <p class="govuk-body">
    There are currently no incomplete notifications.
    </p>
  </div>

<% else %>
  <div class="govuk-accordion opss-accordian__open-remove govuk-!-margin-bottom-0" data-module="govuk-accordion" id="accordion-default">
    <div class="govuk-accordion__section govuk-accordion__section--expanded">
      <div class="govuk-accordion__section-header">
        <h2 class="govuk-accordion__section-heading">

          <button type="button" id="accordion-default-heading-1" aria-controls="accordion-default-content-1" class="govuk-accordion__section-button" aria-describedby="accordion-default-summary-1" aria-expanded="true">
            Incomplete notifications (<%= @unfinished_notifications.count %>)
            <span class="govuk-accordion__icon" aria-hidden="true"></span></button></h2>

        <div class="govuk-accordion__section-summary govuk-body" id="accordion-default-summary-1">
          <p class="govuk-body govuk-!-margin-bottom-1">There are currently <%= @unfinished_notifications.count %> incomplete notifications.</p>
        </div>

      </div>
      <div id="accordion-default-content-1" class="govuk-accordion__section-content" aria-labelledby="accordion-default-heading-1">

        <table class="govuk-table govuk-!-margin-bottom-4 opss-table opss-table--last-col-right opss-table--first-col-normal">

          <caption class="govuk-table__caption govuk-visually-hidden">List of incomplete notified products</caption>


          <thead class="govuk-table__head">
            <tr class="govuk-table__row">
              <th scope="col" class="govuk-table__header">Product</th>
              <th scope="col" class="govuk-table__header">Created</th>
              <th scope="col" class="govuk-table__header"><abbr>UK</abbr> <span class="govuk-visually-hidden">cosmetic product </span>number</th>
              <th scope="col" class="govuk-table__header"><span class="govuk-visually-hidden">Continue</span></th>
            </tr>
          </thead>

          <tbody class="govuk-table__body">
            <% @unfinished_notifications.each do |notification| %>
              <tr class="govuk-table__row">
                <th scope="row" class="govuk-table__header"><%= notification.product_name %></th>
                <td class="govuk-table__cell"><%= display_full_month_date notification.created_at %></td>
                <td class="govuk-table__cell"><%= reference_number_for_display(notification) %></td>
                <td class="govuk-table__cell"><a href="<%= edit_responsible_person_notification_path(@responsible_person, notification) %>" class="govuk-link govuk-link--no-visited-state">Continue<span class="govuk-visually-hidden"><%= notification.product_name %></span></a></td>
              </tr>
            <% end %>
          </tbody>
        </table>


      </div>
    </div>


  </div>

<% end %>
