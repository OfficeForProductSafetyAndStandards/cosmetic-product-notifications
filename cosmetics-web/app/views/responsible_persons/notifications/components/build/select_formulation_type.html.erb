<% title = "Select formulation type" %>
<% question = "How do you want to give the formulation of #{@component_name}?" %>
<% items = formulations_types_label.map { |type_key, type_text| { text: type_text, value: type_key.to_sym, checked: answer_checked?(type_key.to_sym) } } %>

<% page_title title, errors: @component.errors.any? %>
<% content_for :after_header do %>
  <%= govukBackLink text: "Back", href: previous_wizard_path %>
<% end %>

<% warning_html = if @component.notification_type.present?
    govukWarningText(iconFallbackText: "Warning",
                     classes: "govuk-!-width-three-quarters govuk-!-margin-top-3 opss-warning-text--m",
                     text: "Changing the formulation type will remove all ingredients already added")
  end
%>

<%= form_with model: @component, url: wizard_path, method: :put do |form| %>
  <div class="govuk-grid-row">
    <div class="govuk-grid-column-two-thirds">
      <%= error_summary_for(@component, first_values: {notification_type: items[0][:value]}) %>
      <%= render "form_components/govuk_radios",
        form: form,
        key: :notification_type,
        fieldset: { legend: { text: question, classes: "govuk-fieldset__legend--l", isPageHeading: true } },
        hint: { html:  warning_html },
        items: items %>
      <%= govukButton text: "Continue" %>
    </div>
  </div>
<% end %>
