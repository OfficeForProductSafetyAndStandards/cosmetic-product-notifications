<% content_for :page_title, "Responsible Person" %>
<% content_for :after_header do %>
  <%= render "layouts/navbar" %>
<% end %>

<div class="govuk-grid-row">
  <div class="govuk-grid-column-two-thirds govuk-!-padding-bottom-6">
    <h1 class="govuk-heading-l">Responsible person</h1>
    <% if current_user.responsible_persons.length > 1 %>
      <%= link_to "Switch responsible person", select_responsible_persons_path, class: 'govuk-link govuk-link--no-visited-state govuk-!-font-size-19' %>
    <% else %>
      <%= link_to "Add new Responsible Person", account_path(:select_type), class: 'govuk-link govuk-link--no-visited-state govuk-!-font-size-19' %>
    <% end %>
  </div>
</div>

<div class="govuk-grid-row">
  <div class="govuk-grid-column-full">
    <table class="govuk-table">
      <tbody class="govuk-table__body">
        <tr class="govuk-table__row">
          <th class="govuk-table__header govuk-!-width-one-third" scope="row">
            Business name
          </th>
          <td class="govuk-table__cell"><%= @responsible_person.name %></td>
        </tr>
        <tr class="govuk-table__row">
          <th class="govuk-table__header" scope="row">Address</th>
          <td class="govuk-table__cell">
            <% @responsible_person.address_lines.each do |address_line| %>
              <%= address_line %>
              <br>
            <% end %>
          </td>
        </tr>
      </tbody>
    </table>

    <h2 class="govuk-heading-m">Contact person</h2>

    <% @responsible_person.contact_persons.each do |contact_person| %>
      <%= render "/notifications/contact_person_details", contact_person: contact_person %>
    <% end %>
  </div>
</div>
