<% type = @notification.notification_complete? ? 'notification' : 'draft' %>
<%
  back_path = if @notification.notification_complete?
    responsible_person_notification_path(@notification.responsible_person, @notification)
  else
    responsible_person_notification_draft_path(@notification.responsible_person, @notification)
  end
%>
<% page_title "Delete #{type}", errors: @notification.errors.any? %>
<% content_for :after_header do %>
  <%= link_to "Back", back_path, class: "govuk-back-link" %>
<% end %>

<div class="govuk-grid-row">
  <div class="govuk-grid-column-full">
    <%= error_summary(@notification.errors, map_errors: { confirmation: :yes }) %>
    <%= form_with model: @notification, scope: :confirmation, url: responsible_person_delete_notification_path(@responsible_person, @notification), html: { novalidate: true}, method: :delete do |form| %>
      <%= render "form_components/govuk_checkboxes",
            form: form,
            id: "confirmation",
            key: :confirmation,
            hint: { text: "The #{@notification.product_name} product notification #{ @notification.notification_complete? ? '' : 'draft ' }will be deleted." },
            fieldset: { legend: { text: "Do you want to delete this #{type}?", classes: "govuk-fieldset__legend--l", isPageHeading: true } },
            items: [{ id: "yes", key: :yes, value: "yes", text: "Yes", checked: false }] %>

      <div class="govuk-button-group">
        <%= govukButton(text: "Delete") %>
        <%= link_to("Cancel", back_path, class: "govuk-link  govuk-link--no-visited-state" ) %>
      </div>
    <% end %>
  </div>
</div>
