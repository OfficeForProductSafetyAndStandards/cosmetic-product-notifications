<% type = @notification.notification_complete? ? 'notification' : 'draft' %>
<%
  back_path = if @notification.notification_complete?
    responsible_person_notification_path(@notification.responsible_person, @notification)
  else
    responsible_person_notification_draft_path(@notification.responsible_person, @notification)
  end
%>
<% content_for :page_title, "Delete #{type}" %>
<% content_for :after_header do %>
  <%= link_to "Back", back_path, class: "govuk-back-link" %>
<% end %>

<div class="govuk-grid-row">
  <div class="govuk-grid-column-two-thirds">
    <%= error_summary(@notification.errors) %>
    <%= form_with url: responsible_person_delete_notification_path(@responsible_person, @notification), method: :delete do |form| %>
      <%= render "form_components/govuk_checkboxes",
            form: form,
            key: :confirmation_check,
            hint: { text: "The #{@notification.product_name} product notification #{ @notification.notification_complete? ? '' : 'draft ' }will be deleted." },
            fieldset: { legend: { text: "Do you want to delete this #{type}?", classes: "govuk-fieldset__legend--l", isPageHeading: true } },
            items: [{ key: :confirmation, value: "yes", text: "Yes", checked: false }] %>

      <div class="govuk-button-group">
        <%= govukButton(text: "Delete") %>
        <%= link_to("Cancel", back_path, class: "govuk-link  govuk-link--no-visited-state" ) %>
      </div>
    <% end %>
  </div>
</div>
