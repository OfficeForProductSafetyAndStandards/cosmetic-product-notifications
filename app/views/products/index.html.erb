<% content_for :page_title, "Products - Market Surveillance & Product Safety" %>

<div class="breadcrumbs">
    <ol role="breadcrumbs">
        <li>
            <a href="/">Home</a>
        </li>
        <li>
            <%= link_to 'Products', products_path %>
        </li>
    </ol>
</div>

<h1 class="heading-xlarge">Products</h1>
<%= link_to 'New product', new_product_path, :class => "button" %><br /><br />

<%= form_with(url: products_path, method: :get) do |form| %>
  <div class="form-group">
    <%= form.label "Search", :class => "form-label" %>
    <%= form.text_field :q, value: params[:q], :class => "form-control" %>
    <%= form.submit "Go", name: nil, :class => "button" %>
  </div>
<% end %>

<%= will_paginate @products %>
<br />
<table>
  <thead>
    <tr>
      <th>GTIN (Barcode)</th>
      <th>Name</th>
      <th>Brand</th>
      <th>Investigations</th>
      <th colspan="1"></th>
    </tr>
  </thead>

  <tbody>
    <% @products.each do |product| %>
      <tr>
        <td><%= product.gtin %></td>
        <td><%= link_to product.name, product %></td>
        <td><%= product.brand %></td>
        <td><%= product.investigations.length %></td>
        <td><%= link_to 'Delete', product, method: :delete, data: { confirm: 'Are you sure?' } %></td>
      </tr>
    <% end %>
  </tbody>
</table>
<br />
<%= will_paginate @products %>

